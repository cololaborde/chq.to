<div id="<%= dom_id(link, is_index_view) %>" class="link-details-container">

  <div class="button-container">
    <% if is_index_view %>
      <%= link_to "Ver", link %>
    <% end %>

    <p style="margin-left: 10px; margin-right: 35px">
      <%= link_to 'Accesos', link_accesses_path(link_id: link.id, access_go_back: is_index_view ? polymorphic_path(link.class) : polymorphic_path(link)), class: 'access-details-link' %>
    </p>

    <%= link_to "Editar", edit_polymorphic_path(link, edit_go_back: is_index_view ? polymorphic_path(link.class) : polymorphic_path(link) ) %>
    <%= button_to "Borrar", link, method: :delete, data: {turbo_method: :delete, turbo_confirm: 'Seguro deseas eliminar?'} %>
  </div>

  <% if is_index_view %>
    <div class="new-button-container">
    <%= link_to "Nuevo", new_polymorphic_path(link.class, new_go_back: polymorphic_path(link.class)) %>
    </div>
  <% end %>
  
  <% if not is_index_view %>
    <p>
      <strong>Link:</strong> 
      <a href="#" onclick="openLink('<%= @final_url %>'); return false;"><%= @final_url %></a>
    </p>
  <% end %>

  <p>
    <strong>Nombre:</strong>
    <%= link.name %>
  </p>

  <p>
    <strong>URL destino:</strong>
    <a href="#" onclick="openLink('<%= @final_url %>'); return false;"><%= link.destination_url %></a>
  </p>

  <% case link.class.to_s %>
  <% when 'EphemeralLink' %>
    <p>
      <p>
        <strong>Usado:</strong> <%= link.used ? "Si" : "No" %>
      </p>
    </p>
  <% when 'PrivateLink' %>
    <% if not is_index_view %>
      <p>
        <strong>Contrase√±a:</strong> <%= link.password %>
      </p>
    <% end %>
  <% when 'TemporalLink' %>
    <p>
      <strong>Vencimiento:</strong> <%= link.expiration_date.strftime("%d-%m-%Y %H:%M:%S") %>
    </p>
  <% end %>

</div>

<%= javascript_include_tag 'openLink' %>
