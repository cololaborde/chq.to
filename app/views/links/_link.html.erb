<div id="<%= dom_id(link, is_index_view) %>" class="link-details-container">

  <div class="button-container">
    <%= link_to "Editar", edit_polymorphic_path(link) %>
    <%= button_to "Borrar", link, method: :delete, data: { confirm: '¿Estás seguro?' } %>
  </div>

  <% if is_index_view %>
    <div class="new-button-container">
      <%= link_to "Nuevo", new_polymorphic_path(link.class) %>
    </div>
  <% end %>
  
  <% if not is_index_view %>
    <p>
      <strong>Link:</strong> 
      <a href="#" onclick="openLink('<%= @final_url %>'); return false;"><%= @final_url %></a>
    </p>
  <% end %>

  <p>
    <strong>Name:</strong>
    <%= link.name %>
  </p>

  <p>
    <strong>Destination URL:</strong>
    <%= link.destination_url %>
  </p>

  <% case link.class.to_s %>
  <% when 'EphemeralLink' %>
    <p>
      <strong>Usado:</strong> <%= link.used %>
    </p>
  <% when 'PrivateLink' %>
    <p>
      <strong>Contraseña:</strong> <%= link.password %>
    </p>
  <% when 'TemporalLink' %>
    <p>
      <strong>Vencimiento:</strong> <%= link.expiration_date.strftime("%d-%m-%Y %H:%M:%S") %>
    </p>
  <% end %>

  <p>
    <%= link_to 'Accesos', link_accesses_path(link_id: link.id), class: 'access-details-link' %>
  </p>

  <% if is_index_view %>
    <%= link_to "Detalle", link %>
  <% end %>
</div>

<%= javascript_include_tag 'openLink' %>
